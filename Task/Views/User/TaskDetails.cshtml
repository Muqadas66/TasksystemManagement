@model Task.Models.TaskDetailsViewModel
@{
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}

<div class="container mt-5">
    <div class="header-bg text-center mb-4">
        <h2 class="text-light">Task Details: @Model.Task.Title</h2>
    </div>

    <div class="stylish-background p-4 rounded">
        <div class="task-info mb-4">
            <p><strong>Description:</strong> @Model.Task.Description</p>
            <p>
                <strong>Status:</strong>
                <span class="badge status-badge" style="background-color: @(Model.Task.Status == "Completed" ? "#28A745" : Model.Task.Status == "In Progress" ? "#17A2B8" : "#DC3545");">
                    @Model.Task.Status
                </span>
            </p>
            <p>
                <strong>Priority:</strong>
                <span class="badge priority-badge" style="background-color: @(Model.Task.Priority == "High" ? "#FF5733" : Model.Task.Priority == "Medium" ? "#FFC300" : "#28A745");">
                    @Model.Task.Priority
                </span>
            </p>
            <p><strong>Due Date:</strong> @Model.Task.Deadline</p>
        </div>

        <h3 class="mb-3">Comments</h3>
        <ul class="list-group mb-4">
            @foreach (var activity in Model.TaskActivities)
            {
                <li class="list-group-item">
                    <strong class="text-primary">User @activity.UserId:</strong>
                    <p>@activity.Comments</p>

                    <small class="text-muted" style="font-style: italic; font-size: 0.9em;">Last Updated: @activity.LastUpdated</small>
                </li>
            }
        </ul>

        <h3>Add a Comment</h3>
        @using (Html.BeginForm("AddComment", "User", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            @Html.Hidden("taskId", Model.Task.AssignTaskID)
            <div class="form-group">
                <label for="comment">Your Comment</label>
                <textarea name="comment" id="comment" rows="4" class="form-control"></textarea>
            </div>
            <button type="submit" class="btn btn-primary animated-button">Add Comment</button>
        }
    </div>
</div>

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<style>
    body {
        background-color: #f0f2f5;
        font-family: 'Arial', sans-serif;
    }

    .header-bg {
        background: linear-gradient(135deg, #6a82fb, #fc5c7d);
        padding: 30px 0;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        animation: fadeIn 1s ease-in-out;
    }

    .stylish-background {
        background-color: #f8f9fa;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }

    .task-info {
        margin-bottom: 20px;
    }

    .badge {
        font-weight: bold;
        padding: 6px 12px;
        border-radius: 5px;
        transition: transform 0.2s;
    }

        .badge:hover {
            transform: scale(1.1);
        }

    .list-group-item {
        transition: background-color 0.3s;
    }

        .list-group-item:hover {
            background-color: rgba(0, 123, 255, 0.1);
        }

    .animated-button {
        position: relative;
        overflow: hidden;
    }

        .animated-button::after {
            content: "";
            position: absolute;
            width: 300%;
            height: 300%;
            background: rgba(255, 255, 255, 0.3);
            left: 50%;
            top: 50%;
            opacity: 0;
            border-radius: 50%;
            transition: all 0.5s ease;
            transform: translate(-50%, -50%) scale(0);
        }

        .animated-button:hover::after {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

    @@keyframes fadeIn {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }
</style>
